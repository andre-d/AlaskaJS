<!DOCTYPE HTML>
<html>
	<head>
		<title>AlaskaJS Demo</title>
		<link rel="stylesheet" href="game.css" type="text/css" />
	</head>
	<script src="http://code.jquery.com/jquery-1.5.js"></script>
	<script type="text/javascript">
		var i = false,timer,backspacing,rWait,doFakeBackspace,timer2,cursor,command,console;
		doFakeBackspace=true;
		keysUnDefaulted=[47];
		function backspace(source){
				if((!source)&&backspacing&&doFakeBackspace){
					// If a backspace is already in progress and this did not come from the timer, this means that backspace key repeats, stop emulating it
					console.append("<br/>This system supports key repeating backspace, key repeat faking for backspace has been disabled");
					doFakeBackspace=false;
					clearInterval(timer2);
				}
				command.text(command.text().substring(0, command.text().length-1));
				if((doFakeBackspace&&(!backspacing||rWait))){
					clearInterval(timer2);
					var t=250;
					if(rWait){
						t=50;
						rWait=false;
					}else{
						rWait=true;
					}
					timer2= setInterval('backspace(true)', t);					
				}
				
			
				backspacing=true
			
		}
		window.onload=function() {
			
			 console=$("#console");
			 command=$("#command");
			 rWait=false;

			 console.empty();
			 console.append("Welcome<br/>This screen verifies that you have javascript enabled.");
			 $(document).keydown(function(event) {
				 if(event.which==8){
					 backspace(false);
				}else if(event.which==13){
					console.append("<br/>"+command.html());
					command.empty();
					
				}
				
			 });
			 
			$(document).keyup(function(event) {
				if(event.which==8){
					backspacing=false;
					rWait=false;
					clearInterval(timer2);
				}
			});
							 
			$(document).keypress(function(event) {
			//	alert(event.which);
				if(event.which>=33&&event.which<=126){
					command.text(command.text()+String.fromCharCode(event.which));
				}else if(event.which==32){
					command.html(command.html()+"&nbsp;");
				}
				for(i=0;i<keysUnDefaulted.length;i++){
					
					if(event.which==keysUnDefaulted[i]){
						event.preventDefault(); // Prevent '/' from triggering the quick find
						break;
					}
				}
			});

			timer = setInterval('blink()', 500);
			
			cursor= document.getElementById('cursor');
		}

		function blink() {
			if(i){cursor.style.backgroundColor = '#ffffff';i=false;}else{cursor.style.backgroundColor = '#000000';i=true;}
		}
	</script>
	<body>
	
	<div id="headerbar"><time>12:55PM</time> - 100Pts - Your Red House</div>
		<div id="gamewindow">
			<div id="content">	
				<div id="console">
					You must enable javascript for this to work.
				</div>
				<div id="input">
					<span id="prompt">Command:&nbsp;</span><span id="command"></span><span id="cursor">&nbsp;</span>
				</div>
			</div>
		</div>
	</body>
</html>


